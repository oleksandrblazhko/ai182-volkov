# V1.5 Архітектура введення та виведення
У версії 4.0 ми відійшли від терміна «серверна сторона» як терміна завантаженої межі довіри. Межа довіри
викликає занепокоєння – прийняття рішень у ненадійних браузерах або клієнтських пристроях можна обійти. Проте в
Сьогодні в основних архітектурних розгортаннях точка забезпечення довіри різко змінилася.
Тому, коли в ASVS використовується термін «рівень довіреної служби», ми маємо на увазі будь-яке довірене виконання
точка, незалежно від розташування, наприклад мікросервіс, безсерверний API, серверний, довірений API на клієнтському пристрої
який має безпечне завантаження, партнерські чи зовнішні API тощо.
Термін «ненадійний клієнт» тут стосується технологій на стороні клієнта, які відображають рівень презентації,
зазвичай називають «інтерфейсними» технологіями. Термін «серіалізація» тут стосується не лише надсилання даних
через мережу, як-от масив значень або отримання та читання структури JSON, а також передача складних об’єктів
які можуть містити логіку.

|#|Description|L1|L2|L3|CWE|
|----|----|----|----|----|----|
|1.5.1 |Переконайтеся, що вимоги до вхідних і вихідних даних чітко визначають, як  <br>обробляти та обробляти дані на основі типу, вмісту та чинних законів,<br>нормативних актів і дотримання іншої політики.||V|V|1029|
|1.5.2 |Переконайтеся, що серіалізація не використовується під час спілкування з ненадійними клієнтів. Якщо це неможливо, переконайтеся, що належні засоби контролю цілісності (і(можливо, шифрування, якщо надсилаються конфіденційні дані) застосовуються для запобігання атаки десеріалізації, включаючи впровадження об’єктів.||V|V|502|
|1.5.3 |Переконайтеся, що перевірка введених даних виконується на рівні довіреної служби. (C5)||V|V|602|
|1.5.4 |Переконайтеся, що вихідне кодування відбувається близько до або за допомогою інтерпретатора, для якого воно призначений. (C4)||V|V|116|

# C5: перевірка всіх введених даних 
## Oпис
Перевірка вхідних даних — це техніка програмування, яка гарантує, що лише правильно відформатовані дані можуть входити до компонента програмної системи.

### Синтаксис і семантична валідність
Програма повинна перевірити, чи дані є як синтаксично, так і семантично дійсними (у такому порядку), перш ніж використовувати їх у будь-який спосіб (включно з відображенням їх назад для користувача).

Правильність синтаксису означає, що дані знаходяться в очікуваній формі. Наприклад, програма може дозволити користувачеві вибрати чотиризначний «ідентифікатор облікового запису» для виконання певної операції. Додаток має припустити, що користувач вводить корисне навантаження SQL-ін’єкції, і повинен перевірити, що дані, введені користувачем, містять рівно чотири цифри та складаються лише з чисел (на додаток до використання належної параметризації запиту).

Семантична валідність включає лише прийняття вхідних даних, які знаходяться в прийнятному діапазоні для даної функціональності програми та контексту. Наприклад, під час вибору діапазонів дат дата початку має передувати даті завершення.

# C4: Кодування та екранування даних
## Oпис
Кодування та вихід — це захисні методи, призначені для припинення ін’єкційних атак. Кодування (зазвичай називається «кодування виводу») передбачає переклад спеціальних символів у іншу, але еквівалентну форму, яка більше не є небезпечною в цільовому інтерпретаторі, наприклад, переклад символу < на &lt; рядок під час запису на сторінку HTML. Екранування передбачає додавання спеціального символу перед символом/рядком, щоб уникнути його неправильного тлумачення, наприклад, додавання символу \ перед символом " (подвійні лапки), щоб він інтерпретувався як текст, а не як закриття рядка.

Кодування виводу найкраще застосовувати безпосередньо перед тим, як вміст передається цільовому інтерпретатору. Якщо цей захист виконується занадто рано під час обробки запиту, то кодування або екранування можуть заважати використанню вмісту в інших частинах програми. Наприклад, якщо ви екрануєте вміст HTML перед збереженням цих даних у базі даних, а інтерфейс користувача автоматично екранує ці дані вдруге, вміст не відображатиметься належним чином через подвійне екранування.

### Кодування контекстного виводу
Контекстне кодування виводу є важливою технікою програмування безпеки, необхідною для зупинки XSS. Цей захист виконується на виході, коли ви створюєте інтерфейс користувача, в останній момент перед тим, як ненадійні дані динамічно додаються до HTML. Тип кодування залежатиме від місця (або контексту) у документі, де дані відображаються або зберігаються. Різні типи кодування, які будуть використовуватися для побудови безпечних інтерфейсів користувача, включають кодування HTML Entity Encoding, HTML Attribute Encoding, JavaScript Encoding і URL Encoding.
